<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagar Compra | ContaEmprende</title>
  <link rel="stylesheet" href="../css/compra-pagar.css" />
</head>
<body>
  <!-- Fondo animado -->
  <div class="animated-background">
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="floating-icon icon-1">
      <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
        <line x1="1" y1="10" x2="23" y2="10"/>
      </svg>
    </div>
  </div>

  <!-- Botón Volver flotante -->
  <button class="btn-volver" onclick="window.history.back()">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    Volver
  </button>

  <main class="container">
    <!-- Header -->
    <div class="page-header">
      <div class="header-icon">
        <svg width="35" height="35" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
          <line x1="1" y1="10" x2="23" y2="10"/>
        </svg>
      </div>
      <div class="header-text">
        <h1>Pagar Compra</h1>
        <p>Complete el proceso de pago de la compra</p>
      </div>
    </div>

    <!-- Información de la compra -->
    <section id="infoCompra" class="info-card">
      <div class="card-header">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
        <h2>Información de la Compra</h2>
      </div>
      <div class="info-content">
        <div class="loader">
          <div class="spinner"></div>
          <p>Cargando información de la compra...</p>
        </div>
      </div>
    </section>

    <!-- Forma de pago -->
    <section class="payment-card">
      <div class="card-header">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 6v6l4 2"/>
        </svg>
        <h2>Forma de Pago Seleccionada</h2>
      </div>

      <div class="payment-content">
        <!-- Método de pago -->
        <div class="input-group">
          <label>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
              <line x1="1" y1="10" x2="23" y2="10"/>
            </svg>
            Método de Pago
          </label>
          <input id="metodoPago" type="text" disabled readonly>
        </div>

        <!-- Área del banco (solo si es BANCO) -->
        <div id="areaBanco" class="banco-section">
          <div class="banco-badge">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"/>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
            <span>Pago mediante Transferencia Bancaria</span>
          </div>

          <div class="input-group">
            <label>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
              </svg>
              Nombre del Banco
            </label>
            <input type="text" id="bancoNombre" placeholder="Ej: Banco Pichincha">
            <div class="input-line"></div>
          </div>

          <div class="input-group">
            <label>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z"/>
              </svg>
              Tipo de Cuenta
            </label>
            <select id="bancoTipoCuenta">
              <option value="AHORROS">Ahorros</option>
              <option value="CORRIENTE">Corriente</option>
            </select>
            <div class="input-line"></div>
          </div>

          <div class="input-group">
            <label>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                <line x1="1" y1="10" x2="23" y2="10"/>
              </svg>
              N° Cuenta / Tarjeta
            </label>
            <input type="text" id="numeroCuenta" placeholder="Ej: 4556 2411 8599 1123">
            <div class="input-line"></div>
          </div>
        </div>

        <!-- Saldo disponible -->
        <div class="input-group highlight">
          <label>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"/>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
            Saldo Disponible
          </label>
          <div class="currency-input">
            <span class="currency-symbol">$</span>
            <input type="number" id="saldoManual" min="0" step="0.01" placeholder="0.00">
          </div>
          <div class="input-line"></div>
        </div>

        <!-- Checkbox permitir negativo -->
        <div class="checkbox-group">
          <label class="checkbox-container">
            <input type="checkbox" id="permitirNegativo">
            <span class="checkmark"></span>
            <span class="checkbox-label">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                <line x1="12" y1="9" x2="12" y2="13"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
              </svg>
              Permitir saldo negativo
            </span>
          </label>
        </div>

        <!-- Botones de acción -->
        <div class="action-buttons">
          <button id="btnPagar" class="btn btn-primary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
            <span>Pagar Ahora</span>
          </button>
          <button id="btnCancelar" class="btn btn-secondary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
            <span>Cancelar</span>
          </button>
        </div>

        <!-- Mensaje -->
        <p id="mensaje" class="mensaje" aria-live="polite"></p>
      </div>
    </section>
  </main>

  <script src="../js/compra-pagar.js"></script>
  <script>
    // Animaciones de entrada
    window.addEventListener('load', () => {
      const cards = document.querySelectorAll('.info-card, .payment-card');
      cards.forEach((card, index) => {
        setTimeout(() => {
          card.classList.add('appear');
        }, index * 200);
      });

      // Animación de inputs
      setTimeout(() => {
        const inputs = document.querySelectorAll('.input-group');
        inputs.forEach((input, index) => {
          setTimeout(() => {
            input.classList.add('appear');
          }, index * 80);
        });
      }, 400);
    });

    // Focus en inputs
    document.querySelectorAll('input:not([disabled]), select').forEach(input => {
      input.addEventListener('focus', function() {
        this.closest('.input-group').classList.add('focused');
      });
      input.addEventListener('blur', function() {
        if (!this.value) {
          this.closest('.input-group').classList.remove('focused');
        }
      });
    });

    // Animación de checkbox
    const checkbox = document.getElementById('permitirNegativo');
    if (checkbox) {
      checkbox.addEventListener('change', function() {
        const container = this.closest('.checkbox-container');
        if (this.checked) {
          container.classList.add('checked');
        } else {
          container.classList.remove('checked');
        }
      });
    }

    // Animación de botones
    document.querySelectorAll('.btn').forEach(btn => {
      btn.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        ripple.classList.add('ripple-effect');
        this.appendChild(ripple);
        
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = x + 'px';
        ripple.style.top = y + 'px';
        
        setTimeout(() => ripple.remove(), 600);
      });
    });
  </script>
</body>
</html>